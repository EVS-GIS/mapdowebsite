<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Méthodologie – Mapd’O</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Mapd’O</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Accueil</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./methods.html" aria-current="page"> 
<span class="menu-text">Méthodologie</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./modules.html"> 
<span class="menu-text">Modules</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./themes.html"> 
<span class="menu-text">Enjeux thématiques</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">A propos</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#étude-des-besoins" id="toc-étude-des-besoins" class="nav-link active" data-scroll-target="#étude-des-besoins">Étude des besoins</a>
  <ul class="collapse">
  <li><a href="#enjeux-exprimés" id="toc-enjeux-exprimés" class="nav-link" data-scroll-target="#enjeux-exprimés">Enjeux exprimés</a></li>
  <li><a href="#synthèse-des-besoins" id="toc-synthèse-des-besoins" class="nav-link" data-scroll-target="#synthèse-des-besoins">Synthèse des besoins</a></li>
  </ul></li>
  <li><a href="#production-des-données" id="toc-production-des-données" class="nav-link" data-scroll-target="#production-des-données">Production des données</a>
  <ul class="collapse">
  <li><a href="#données-de-base" id="toc-données-de-base" class="nav-link" data-scroll-target="#données-de-base">Données de base</a></li>
  <li><a href="#traitement-des-données" id="toc-traitement-des-données" class="nav-link" data-scroll-target="#traitement-des-données">Traitement des données</a></li>
  <li><a href="#stockage-des-données" id="toc-stockage-des-données" class="nav-link" data-scroll-target="#stockage-des-données">Stockage des données</a></li>
  </ul></li>
  <li><a href="#création-de-lapplication" id="toc-création-de-lapplication" class="nav-link" data-scroll-target="#création-de-lapplication">Création de l’application</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Méthodologie</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Le projet Mapd’O a été développé en plusieurs étapes. Tout d’abord, le concept de l’application a été élaboré, avec la réalisation d’un audit auprès de potentiels futurs utilisateurs afin de mieux comprendre leurs besoins et les cas d’usage envisagés pour l’application. Ensuite, la phase de développement a suivi, incluant la création des jeux de données et, en parallèle, le développement de l’application web. Les sections suivantes fournissent plus d’informations sur ces différentes étapes.</p>
<section id="étude-des-besoins" class="level2">
<h2 class="anchored" data-anchor-id="étude-des-besoins">Étude des besoins</h2>
<p>Le fonctionnement physique des rivières à l’échelle du bassin versant fait régulièrement l’objet de diagnostics dans le cadre d’états des lieux des milieux aquatiques, souvent réalisés par les syndicats de bassin versant. Ces diagnostics sont effectués pour planifier stratégiquement les actions à mener en vue d’améliorer les milieux aquatiques. Ils sont ainsi utilisés dans des dispositifs réglementaires comme les contrats de milieu, les SAGE, ou d’autres outils de programmation spécifiques aux Agences de l’Eau. Les bureaux d’études interviennent régulièrement dans ce type d’évaluation.</p>
<p>L’application Mapd’O vise à caractériser le fonctionnement hydromorphologique des cours d’eau d’un bassin versant, notamment en lien avec la notion d’« espaces de bon fonctionnement ». Elle intègre également des indicateurs relatifs à la dynamique latérale des cours d’eau. De plus, l’application s’inscrit parmi les outils à grande échelle mis à disposition des gestionnaires pour initier un état des lieux ou commander une étude spécifique, tout en offrant une vision globale du fonctionnement hydromorphologique des cours d’eau et des enjeux territoriaux.</p>
<p>Afin de mieux cerner les besoins opérationnels des futurs usagers de l’application, un audit a été mené auprès de différents gestionnaires de cours d’eau et bureaux d’études, de janvier à mai 2023. Les syndicats de bassin versant, tels que les EPTB, ont été principalement ciblés par cet audit. Quelques bureaux d’études, ainsi que des services départementaux et les DREAL, ont également été consultés. Le choix des structures s’est appuyé d’une part sur le réseau du laboratoire EVS et de l’OFB, et d’autre part sur l’Association Nationale des Élus de Bassin Versant (ANEB), qui représente de nombreux EPTB.</p>
<p>L’audit a pris la forme d’entretiens visant à expliquer la démarche et les méthodes du projet, puis à discuter des données et fonctionnalités que l’application pourrait mettre à disposition des structures sur les bassins versants. Lors de ces entretiens, plusieurs constats et besoins exprimés ont été récurrents, permettant ainsi de dresser un premier cadre d’utilisation opérationnelle de l’application.</p>
<section id="enjeux-exprimés" class="level3">
<h3 class="anchored" data-anchor-id="enjeux-exprimés">Enjeux exprimés</h3>
<p>Plusieurs enjeux sont ressortis de ces entretiens :</p>
<ul>
<li><p>Le risque d’inondation, notamment pour des cours d’eau rectifiés avec des temps de réponse courts aux évènements pluvieux et la problématique du manque d’espace d’expansion des crues des rivières en amont des espaces à plus fort enjeux.</p></li>
<li><p>L’abaissement de la nappe d’accompagnement par incision du lit, qui peut être problématique pour le placement des points de captage d’eau potable.</p></li>
<li><p>La dégradation des ouvrages d’art ou des ouvrages de protection contre les inondations par incision du lit.</p></li>
<li><p>La diminution des ressources en eau par une mauvaise connexion des nappes d’accompagnement aux cours d’eau.</p></li>
<li><p>Le colmatage du fond du lit et le transfert de polluants agricoles par érosion des sols.</p></li>
<li><p>Le manque d’habitats de reproduction des poissons (pour la pêche notamment).</p></li>
<li><p>La dégradation des eaux de baignade par manque d’autoépuration des cours d’eau en lien avec la diversification des faciès et les écoulements hyporhéiques au niveau des radiers.</p></li>
</ul>
<p>Tous ces enjeux ne sont pas présents sur tous les territoires à l’exception du risque d’inondation. De même, leurs niveaux de sensibilité varient entre les bassins versants. La mise à disposition de jeux de données nationaux sur ces enjeux permettrait de les lier à la caractérisation hydromorphologique des cours d’eau et ainsi de faciliter l’argumentation de certaines actions. On peut citer par exemple les données inondation (TRI, Atlas des zones inondables, ouvrages de protection contre les inondations), les cartes de risque d’érodabilité des sols, les cartes des aquifères et des piézomètres, les localisations des carrières et des ouvrages d’art.</p>
</section>
<section id="synthèse-des-besoins" class="level3">
<h3 class="anchored" data-anchor-id="synthèse-des-besoins">Synthèse des besoins</h3>
<p>Les besoins exprimés correspondent principalement aux cours d’eau de tailles moyennes ou petites avec des enjeux parfois plus faibles que les grands cours d’eau aménagés où sont implantées les principales zones urbaines. Les petites ou moyennes rivières constituent la grande majorité du linéaire du réseau hydrographique et donc un investissement important lors des états des lieux. Les grands cours d’eau sont généralement mieux connus avec des campagnes de mesures précises et des caractérisations in situ à des échelles moindres mais à des résolutions plus fines que celles pouvant être atteintes à travers des outils de caractérisation à large échelle tels que Mapd’O. Un aspect important dans la caractérisation hydromorphologique des cours d’eau est la mise en relation de ces derniers avec les enjeux du territoire. Ces enjeux, liés à l’hydromorphologie des cours d’eau, permettent de proposer des actions sur des problématiques du territoire et pas uniquement sur les objectifs de bon état écologique. Des fonctionnalités ont également pu être proposées pour venir enrichir l’analyse et l’interprétation des résultats mis à disposition par l’application en permettant:</p>
<ul>
<li><p>la comparaison spatiale historique, par exemple d’évaluer les évolutions de la végétation rivulaire à partir des cartes du XXème siècle ou comparer des métriques dans le temps pour un segment des rivière</p></li>
<li><p>d’effectuer une synthèse des métriques à partir de la sélection d’un tronçon ou d’un bassin versant</p></li>
<li><p>d’effectuer un profil en travers (sur le MNT détendancé).</p></li>
</ul>
<p>Les structures comme les syndicats de bassin versant et les fédérations de pêches recouvrent des tailles variées et une diversité de compétences. Selon la taille des structures, elles ne disposent pas de spécialistes sur les différentes thématiques de gestion. Il faut donc que l’outil soit adapté à un utilisateur avec des connaissances dans le domaine de l’hydromorphologie mais pas un spécialiste.</p>
<p>Un avertissement a été plusieurs fois émis sur l’usage de l’outil. L’application doit proposer une approche par bassin versant et non servir de substitut à des études plus précises de caractérisation d’un tronçon de cours d’eau, en vue de la définition d’une action. L’utilisation devrait ainsi rester dans le champ de l’aide au diagnostic de bassin (plutôt que viser à un diagnostic direct) pour la détermination des types d’actions à envisager sur des tronçons de cours d’eau.</p>
</section>
</section>
<section id="production-des-données" class="level2">
<h2 class="anchored" data-anchor-id="production-des-données">Production des données</h2>
<section id="données-de-base" class="level3">
<h3 class="anchored" data-anchor-id="données-de-base">Données de base</h3>
<p>Les données de base utilisées pour produire les cartes sont un modèle numérique de terrain de l’ensemble de la France, le RGE ALTI à une résolution de 5 m, et la base de données topographiques BD TOPO, qui fournit une description vectorielle du territoire et de ses infrastructures.</p>
<table class="caption-top table">
<caption>Source des données de base utilisées pour la production des cartes</caption>
<thead>
<tr class="header">
<th>Donnée</th>
<th>Description</th>
<th>Source</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>RGE ALTI</td>
<td>Modèle Numérique de Terrain de l’IGN</td>
<td><a href="https://geoservices.ign.fr/rgealti">RGE ALTI</a></td>
</tr>
<tr class="even">
<td>BD TOPO®</td>
<td>Base de données des élements du territoire et de ses infrastructures du territoire français de l’IGN</td>
<td><a href="https://geoservices.ign.fr/bdtopo">BD TOPO</a></td>
</tr>
<tr class="odd">
<td>RPG</td>
<td>Base des données de référence des parcelles agricoles de l’IGN</td>
<td><a href="https://geoservices.ign.fr/rpg" title="https://geoservices.ign.fr/rpg">RPG</a></td>
</tr>
<tr class="even">
<td>BD Carthage®</td>
<td>Base de données spatial des milieux aquatiques superficiels de la France&nbsp;</td>
<td><a href="https://www.data.gouv.fr/fr/datasets/bd-carthage-r/" title="https://www.data.gouv.fr/fr/datasets/bd-carthage-r/">BD Carthage</a></td>
</tr>
</tbody>
</table>
</section>
<section id="traitement-des-données" class="level3">
<h3 class="anchored" data-anchor-id="traitement-des-données">Traitement des données</h3>
<p><a href="https://tramebleue.github.io/fct-cli/">Fluvial Corridor Toolbox (FCT)</a> est un outil d’analyse hydromorphique de rivière par des approches géomatiques développé depuis 2011. L’outil a été initialement réalisé sur ArcGIS, puis sur QGIS et en Python 3. La version QGIS est disponible sous forme de plugin depuis 2019 et compte environ 10 téléchargements par mois. La version Python, moins répandue car plus difficile à utiliser, est destinée à l’analyse de réseaux hydrographiques entiers plutôt que des tronçons de cours d’eau. C’est cette dernière qui est utilisée pour produire les données exploitées dans l’application Mapd’O. Elle permet d’extraire des largeurs, des pentes, l’occupation du sol, la continuité latérale des cours d’eau à partir de données librement accessibles comme la BD TOPO® et les MNT de l’IGN. Ces variables sont synthétisées par tronçon le long de l’axe du fond de vallée (DGO ou Digital Geographical Unit) d’une longueur aujourd’hui défini à 200 mètres.</p>
<p>Tout d’abord, en fusionnant la BD Carthage® avec les données DEM, les limites du réseau hydrographique sont gravées dans les données topographiques. A partir de là, la zone du fond de la vallée est dérivée, ainsi que les caractéristiques représentant le relief du sol, la pente et la terrasse. Le fond de la vallée représente l’espace dans lequel l’analyse suivante est entreprise avec les données de BD TOPO®. Le BD TOPO® est utilisé pour produire une carte d’occupation des sols et une carte de continuité latérale des cours d’eau afin de déterminer les différents compartiments de la vallée alluviale. L’espace est ensuite découpé en tronçon de 200m le long des cours d’eau.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/methods/fct_landuse_ex.png" class="img-fluid figure-img" alt="Carte d’occupation des sols générée à partir de la BD TOPO® de l’IGN"></p>
<figcaption>Carte d’occupation des sols du Drac à Saint-Julien-en-Champsaur, générée à partir de la BD TOPO® de l’IGN, montrant les troncons de 200m</figcaption>
</figure>
</div>
<p>La carte de continuité latérale est ensuite derivé a partir de la carte d’occupation des sols. Elle permet de déterminer les différents compartiments de la vallée alluviale connecté latéralement à la rivière.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/methods/ftc_continuity_ex.png" class="img-fluid figure-img"></p>
<figcaption>Carte de continuité latérale du Drac à Saint-Julien-en-Champsaur, issue de la carte d’occupation des sols</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/methods/ftc_photo_ex.png" class="img-fluid figure-img"></p>
<figcaption>Correspondance des espaces de la continuité latérale sur le Drac à Chabottes</figcaption>
</figure>
</div>
<p>Basée sur ces cartes, des métriques sont ensuite calculées pour chaque tronçon de 200m le long de l’axe du fond de vallée (DGO ou Digital Geographical Unit).</p>
<table class="caption-top table">
<caption>Métriques produites par la FCT à l’échelle des DGOs</caption>
<colgroup>
<col style="width: 29%">
<col style="width: 48%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
<th>Unité</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>measure</code></td>
<td>Distance depuis l’éxutoire de l’axis</td>
<td>m</td>
</tr>
<tr class="even">
<td><code>strahler</code></td>
<td>Ordre de Strahler</td>
<td>-</td>
</tr>
<tr class="odd">
<td><code>talweg_elevation_min</code></td>
<td>Élévation minimale du talweg</td>
<td>m</td>
</tr>
<tr class="even">
<td><code>active_channel_width</code></td>
<td>Largeur du chenal actif</td>
<td>m</td>
</tr>
<tr class="odd">
<td><code>natural_corridor_width</code></td>
<td>Largeur du corridor naturel</td>
<td>m</td>
</tr>
<tr class="even">
<td><code>connected_corridor_width</code></td>
<td>Largeur du corridor connecté</td>
<td>m</td>
</tr>
<tr class="odd">
<td><code>valley_bottom_width</code></td>
<td>Largeur du fond de vallée</td>
<td>m</td>
</tr>
<tr class="even">
<td><code>talweg_slope</code></td>
<td>Pente du moyenne du talweg</td>
<td>%</td>
</tr>
<tr class="odd">
<td><code>floodplain_slope</code></td>
<td>Pente moyenne du fond de vallée</td>
<td>%</td>
</tr>
<tr class="even">
<td><code>water_channel</code></td>
<td>Surface en eau définie par la BD TOPO®</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>gravel_bars</code></td>
<td>Surface des eaux intermittentes / bancs sédimentaires de la BD TOPO®</td>
<td>m²</td>
</tr>
<tr class="even">
<td><code>natural_open</code></td>
<td>Éspace de végétation ouverte</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>forest</code></td>
<td>Éspace de végétation fermée</td>
<td>m²</td>
</tr>
<tr class="even">
<td><code>grassland</code></td>
<td>Parcelle de prairie permanente définie dans le RPG®</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>crops</code></td>
<td>Surface de cultures</td>
<td>m²</td>
</tr>
<tr class="even">
<td><code>diffuse_urban</code></td>
<td>Zone d’habitation diffus proche de la zone d’habitation de la BD TOPO</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>dense_urban</code></td>
<td>Zone continue de l’espace bâti dense ou artificialisée</td>
<td>m²</td>
</tr>
<tr class="even">
<td><code>infrastructures</code></td>
<td>Surface des infrastructures</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>active_channel</code></td>
<td>Surface du chenal actif : le surface en eau et bancs sédimentaires</td>
<td>m²</td>
</tr>
<tr class="even">
<td><code>riparian_corridor</code></td>
<td>Surface du corridor riverain : le chenal actif avec la végétation rivulaire connectée</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>semi_natural</code></td>
<td>SSurface du corridor riverain avec surfaces agricoles connectées.</td>
<td>m²</td>
</tr>
<tr class="even">
<td><code>reversible</code></td>
<td>Espace non urbanisé déconnecté du corridor fluvial par des infrastructures ou du bâti</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>disconnected</code></td>
<td>Zone bâti, dense ou peu dense, et les infrastructures de transport</td>
<td>m²</td>
</tr>
<tr class="even">
<td><code>built_environment</code></td>
<td>Surface des zones bâties</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>water_channel_pc</code></td>
<td>Surface en eau définie par la BD TOPO®</td>
<td>% du fond vallée</td>
</tr>
<tr class="even">
<td><code>gravel_bars_pc</code></td>
<td>Surface des eaux intermittentes / bancs sédimentaires de la BD TOPO®</td>
<td>% du fond vallée</td>
</tr>
<tr class="odd">
<td><code>natural_open_pc</code></td>
<td>Éspace de végétation ouverte</td>
<td>% du fond vallée</td>
</tr>
<tr class="even">
<td><code>forest_pc</code></td>
<td>Éspace de végétation fermée</td>
<td>% du fond vallée</td>
</tr>
<tr class="odd">
<td><code>grassland_pc</code></td>
<td>Parcelle de prairie permanente définie dans le RPG®</td>
<td>% du fond vallée</td>
</tr>
<tr class="even">
<td><code>crops_pc</code></td>
<td>Zone de cultures</td>
<td>% du fond vallée</td>
</tr>
<tr class="odd">
<td><code>diffuse_urban_pc</code></td>
<td>Zone d’habitation diffus proche de la zone d’habitation de la BD TOPO</td>
<td>% du fond vallée</td>
</tr>
<tr class="even">
<td><code>dense_urban_pc</code></td>
<td>Zone continue de l’espace bâti dense ou artificialisée</td>
<td>% du fond vallée</td>
</tr>
<tr class="odd">
<td><code>infrastructures_pc</code></td>
<td>Infrastructure routière et ferroviaire</td>
<td>% du fond vallée</td>
</tr>
<tr class="even">
<td><code>active_channel_pc</code></td>
<td>Surface du chenal actif : le surface en eau et bancs sédimentaires</td>
<td>% du fond vallée</td>
</tr>
<tr class="odd">
<td><code>riparian_corridor_pc</code></td>
<td>Surface du corridor riverain : le chenal actif avec la végétation rivulaire connectée</td>
<td>% du fond vallée</td>
</tr>
<tr class="even">
<td><code>semi_natural_pc</code></td>
<td>Surface du corridor riverain avec surfaces agricoles connectées.</td>
<td>% du fond vallée</td>
</tr>
<tr class="odd">
<td><code>reversible_pc</code></td>
<td>Espace non urbanisé déconnecté du corridor fluvial par des infrastructures ou du bâti</td>
<td>% du fond vallée</td>
</tr>
<tr class="even">
<td><code>disconnected_pc</code></td>
<td>Zone bâti, dense ou peu dense, et les infrastructures de transport</td>
<td>% du fond vallée</td>
</tr>
<tr class="odd">
<td><code>built_environment_pc</code></td>
<td>Surface de zones bâti</td>
<td>% du fond vallée</td>
</tr>
<tr class="even">
<td><code>sum_area</code></td>
<td>Surface totale</td>
<td>m²</td>
</tr>
<tr class="odd">
<td><code>idx_confinement</code></td>
<td>Indice de confinement : Ratio de la largeur de la bande active sur la largeur du fond de vallée.</td>
<td>-</td>
</tr>
</tbody>
</table>
</section>
<section id="stockage-des-données" class="level3">
<h3 class="anchored" data-anchor-id="stockage-des-données">Stockage des données</h3>
<p>Les ensembles des données produits sont stockés dans une base de données <a href="https://www.postgresql.org/">PostgreSQL</a> et mis en place sur un <a href="https://geoserver.org/">geoserver</a>. Les données sont structurées en tables et vues pour faciliter leur exploitation dans l’application Mapd’O.</p>
</section>
</section>
<section id="création-de-lapplication" class="level2">
<h2 class="anchored" data-anchor-id="création-de-lapplication">Création de l’application</h2>
<p>L’application Mapd’O est développée en <a href="https://www.r-project.org/">R</a> avec le package <a href="https://shiny.rstudio.com/">Shiny</a> et le framework <a href="https://thinkr-open.github.io/golem/">golem</a>. La carte interactive est générée avec <a href="https://rstudio.github.io/leaflet/">Leaflet</a>. Les graphiques sont produits avec <a href="https://plotly.com/r/">Plotly</a>.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>